# テーブル定義書
---
#### 月次商品別粗利率テーブル
**概要** : 
| カラム名 | 型 | 制約 | 説明 |
| ------ | ------ | ------ | ------ |
| 完成品ID | VARCHA‌R | PK | |
| 完成品名 | VARCHA‌R |  |  |
| 粗利率 | DECIMAL |  |  |
| 年月 | VARCHA‌R |　 |  |
| 売上 | DECIMAL |  |  |

#### 月次EV販売率テーブル
**概要** : 
| カラム名 | 型 | 制約 | 説明 |
| ------ | ------ | ------ | ------ |
| 年月 | VARCHA‌R |  | |
| 全体売上 | DECIMAL |  |  |
| EV売上 | DECIMAL |  |  |
| 販売率 | DECIMAL |　 |  |

#### 月次エリア別EV販売率テーブル
**概要** : 
| カラム名 | 型 | 制約 | 説明 |
| ------ | ------ | ------ | ------ |
| 年月 | VARCHA‌R |  | |
| 全体売上 | DECIMAL |  |  |
| EV売上 | DECIMAL |  |  |
| 販売率 | DECIMAL |  |  |
| 拠点 | VARCHA‌R |  |  |

#### 月次先進安全装置適用率テーブル
**概要** : 
| カラム名 | 型 | 制約 | 説明 |
| ------ | ------ | ------ | ------ |
| 年月 | VARCHA‌R |  | |
| 全体売上 | DECIMAL |  |  |
| 先進安全装置適用車両売上 | DECIMAL |  |  |
| 販売率 | DECIMAL |　 |  |

#### 月次エリア別先進安全装置適用率テーブル
**概要** : 
| カラム名 | 型 | 制約 | 説明 |
| ------ | ------ | ------ | ------ |
| 年月 | VARCHA‌R |  | |
| 全体売上 | DECIMAL |  |  |
| 先進安全装置適用車両売上 | DECIMAL |  |  |
| 販売率 | DECIMAL |  |  |
| 拠点 | VARCHA‌R |  |  |

#### 棚卸資産回転期間テーブル
**概要** : 
| カラム名 | 型 | 制約 | 説明 |
| ------ | ------ | ------ | ------ |
| 完成品ID | VARCHA‌R | PK | |
| 完成品名 | VARCHA‌R |  | |
| 年月 | VARCHA‌R |  | |
| 月あたりの売上原価 | DECIMAL |  |  |
| 在庫金額 | DECIMAL |  |  |
| 棚卸資産回転期間 | DECIMAL |  |  |

#### 月次EBITDAテーブル
**概要** : 
| カラム名 | 型 | 制約 | 説明 |
| ------ | ------ | ------ | ------ |
| 完成品ID | VARCHA‌R | PK | |
| 完成品名 | VARCHA‌R |  | |
| 年月 | VARCHA‌R |  | |
| 売上 | DECIMAL |  |  |
| 粗利額 | DECIMAL |  |  |
| 販売管理費 | DECIMAL |  |  |
| EBITDA | DECIMAL |  |  |


---

需要予測のパーセンタイルは、forecast_recordsのp10, p50, p90の値を用いる。
Forecastエンティティに存在しないパーセンタイル値については、線形補間アプローチを用いる。安全在庫計算は、P10/P50/P90に基づいて他のパーセンタイルの需要予測を計算する。以下は、P40とP75を計算するための計算式例。
• P40の計算式: P40 = ( (40-10) / (50-10) ) * (P50 - P10) + P10
• P75の計算式: P75 = ( (75-50) / (90-50) ) * (P90 - P50) + P50

#### 補足事項：欠品許容率 (stockout\_tolerance\_rate) に設定可能な値について

本演習における総コスト最小化の計算では、時間内に総当たりによる最適解の探索を可能にするため、`InventoryPolicy_Records`テーブルの`stockout_tolerance_rate`に設定できる値を、以下の4つに限定します。

設定可能な欠品許容率の値：
* **0.001 (0.1%)**: ほぼ欠品を許さない高いサービスレベルを維持する戦略に相当します。
* **0.05 (5%)**: 標準的なサービスレベルと在庫コストのバランスを取る戦略に相当します。
* **0.10 (10%)**: ややコスト削減を意識した戦略に相当します。
* **0.30 (30%)**: 在庫コストの削減や、保管キャパシティの制約を意識した戦略に相当します。

在庫コスト：max_stock*保管コスト
欠品コスト：実需要は、予測値のp50を中心に正規分布すると仮定して、１試行は製品のリードタイム+補充サイクル分でシミュレーションし計算する。本演習では、forecast_recordsのうちもっとも最新の週次予測値を毎週繰り返し当てはめて計算して良い。